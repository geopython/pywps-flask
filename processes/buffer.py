__author__ = 'Brauni'from pywps import Process, LiteralInput, ComplexInput, ComplexOutput, Format, FORMATSclass Buffer(Process):    def __init__(self):        inputs = [ComplexInput('poly_in', 'Input1', [Format('GML')]),                  LiteralInput('buffer', data_type='float')                  ]        outputs = [ComplexOutput('buff_out', 'Buffered', [Format('GML')])]        super(Buffer, self).__init__(            self._handler,            identifier='buffer',            version='0.1',            title="Brauni's 1st process",            abstract='This process is the best ever being coded',            profile='',            wsdl='',            metadata=['Process', '1st', 'Hilarious'],            inputs=inputs,            outputs=outputs,            store_supported=True,            status_supported=True        )    @staticmethod    def _handler(request, response):        from osgeo import ogr        inSource = ogr.Open(request.inputs['poly_in'].file)        inLayer = inSource.GetLayer()        out = "/tmp/" + inLayer.GetName()        # create output file        driver = ogr.GetDriverByName('GML')        outSource = driver.CreateDataSource(out, ["XSISCHEMAURI=http://schemas.opengis.net/gml/2.1.2/feature.xsd"])        outLayer = outSource.CreateLayer(out, None, ogr.wkbUnknown)        # for each feature        featureCount = inLayer.GetFeatureCount()        index = 0        import time        while index < featureCount:            # get the geometry            inFeature = inLayer.GetNextFeature()            inGeometry = inFeature.GetGeometryRef()            # make the buffer            buff = inGeometry.Buffer(float(request.inputs['buffer'].data))            # create output feature to the file            outFeature = ogr.Feature(feature_def=outLayer.GetLayerDefn())            outFeature.SetGeometryDirectly(buff)            outLayer.CreateFeature(outFeature)            outFeature.Destroy()  # TODO: makes it crash            index += 1            time.sleep(1)  # making things little bit slower            response.update_status("Calculating buffer for feature %d from %d" % (index + 1, featureCount),                                   (100 * (index + 1) / featureCount * 1))        # TODO: outLayer is not working to be set as data        response.outputs['buff_out'].output_format = Format(FORMATS['GML'])        response.outputs['buff_out'].file = out  # TODO: pywps doesn't know what to do with this        return response